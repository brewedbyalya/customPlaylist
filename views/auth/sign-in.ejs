<%- include('../partials/header') %>
<div class="auth-container">
  <div class="auth-card">
    <h1 class="auth-title">Sign In</h1>

    <% if (error) { %>
      <div class="alert alert-error">
        <i class="fas fa-exclamation-circle"></i> <%= error %>
      </div>
    <% } %>

    <form action="/auth/sign-in" method="POST" class="auth-form">
      <div class="form-group">
        <label for="usernameOrEmail" class="form-label">
          <i class="fas fa-user"></i> Username or Email
        </label>
        <input 
          type="text" 
          id="usernameOrEmail" 
          name="usernameOrEmail" 
          class="form-input" 
          required
          value="<%= typeof usernameOrEmail !== 'undefined' ? usernameOrEmail : '' %>"
        >
      </div>
      
      <div class="form-group">
        <label for="password" class="form-label">
          <i class="fas fa-lock"></i> Password
        </label>
        <div class="password-wrapper">
          <input 
            type="password" 
            id="password" 
            name="password" 
            class="form-input" 
            required
            minlength="6"
          >
          <button type="button" class="toggle-password" aria-label="Show password">
            <i class="fas fa-eye"></i>
          </button>
        </div>
      </div>
      
      <button type="submit" class="auth-button">
        <i class="fas fa-sign-in-alt"></i> Sign In
      </button>

      <div class="auth-divider">
        <span>or</span>
      </div>

      <a href="/auth/spotify" class="btn btn-spotify">
        <i class="fab fa-spotify"></i> Sign In with Spotify
      </a>
    </form>
    
    <div class="auth-footer">
      Don't have an account? <a href="/auth/sign-up">Sign up</a>
    </div>
  </div>
</div>

<script>
  document.querySelector('.toggle-password').addEventListener('click', function() {
    const passwordInput = document.getElementById('password');
    const icon = this.querySelector('i');
    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      icon.classList.replace('fa-eye', 'fa-eye-slash');
    } else {
      passwordInput.type = 'password';
      icon.classList.replace('fa-eye-slash', 'fa-eye');
    }
  });
</script>

<%- include('../partials/footer') %>